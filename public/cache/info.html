<!DOCTYPE html>
<html lang="Zh_cn" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="{{ $author or '' }}">
    <title>博客</title>
    <meta name="keywords" content="Mysql">
    <meta name="description" content="索引">
    <meta property="og:type" content="website">
    <meta property="og:title" content="{{ $site_title or '' }}">
    <meta property="og:site_name" content="{{ $site_title or '' }}">
    <meta property="og:description" content="{{ $site_description or '' }}">
    <meta name="theme-color" content="#52768e">
    <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
    <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.css" rel="stylesheet">

     <link href="/static/build/css/app-ce8e1850b4.css" rel="stylesheet">
    
</head>
<body id="body">
    <style>
        @media screen and (min-width: 768px) {
            .main-header {
                background: url("https://ooo.0o0.ooo/2016/12/31/5867d44be33bd.jpg") no-repeat center center;
                background-size: 100% auto;
                position: static;
            }
        }
    </style>

<header class="main-header">
    <div class="container-fluid" style="margin-top: -15px">
        <nav class="navbar site-navbar" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target="#blog-navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="/"
                   class="navbar-brand">LiuAnYuan</a>
            </div>
            <div class="collapse navbar-collapse fix-top" id="blog-navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a class="menu-item" href="{{ route('achieve') }}">归档</a></li>

                    <li><a class="menu-item" href="{{ route('projects') }}">项目</a></li>

                    <li><a class="menu-item"
                           href="{{ route('page.show',$page->name) }}">关于</a>
                    </li>

                </ul>
                <ul class="nav navbar-nav navbar-right blog-navbar">

                                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            刘安源                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu" role="menu">
                            <li><a href="/user/1">个人中心</a></li>
                            <li><a href="/admin/index">后台管理</a></li>
                            <li class="divider"></li>
                            <li><a href="/index/login/logout">退出登录</a>
                            </li>
                        </ul>
                    </li>
                                    </ul>
                <form class="navbar-form navbar-right" role="search" method="get" action="/index/search">
                    <input type="text" class="form-control" name="keyword" placeholder="搜索" required>
                </form>
            </div>
        </nav>
    </div>
    <div class="container-fluid">
        <div class="description"></div>
    </div>
</header>
<div id="content-wrap">
    <div class="container">

    </div>
    
    <div class="container">
        <div id="post-detail-wrap" class="row">
            <div class="col-md-8 col-md-offset-2 col-sm-12 phone-no-padding">
                <div class="post-detail">
                    <div class="center-block">
                        <div class="post-detail-title">mysql优化</div>
                        <div class="post-meta">
                            <span class="post-category">
                           <i class="fa fa-folder-o fa-fw"></i>
                           <a href="/category/ 4">
                           Mysql                           </a>
                           </span>
                            <span class="post-comments-count">
                           &nbsp;|&nbsp;
                           <i class="fa fa-comments-o fa-fw" aria-hidden="true"></i>
                           <span> 0</span>
                           </span>
                            <span>
                           &nbsp;|&nbsp;
                           <i class="fa fa-eye"></i>
                           <span>1</span>
                           </span>
                            
                        </div>
                    </div>
                    <br>
                    <div class="post-detail-content">
                        <h3>mysql</h3>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>sex</th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>刘安</td>
<td>35</td>
</tr>
</tbody>
</table>                        <br>
                        <p>
                            -- END
                        </p>
                    </div>
                    <div class="post-info-panel">
                        <p class="info">
                            <label class="info-title">版权声明:</label><i class="fa fa-fw fa-creative-commons"></i>自由转载-非商用-非衍生-保持署名（<a
                                    href="https://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">创意共享3.0许可证</a>）
                        </p>
                        <p class="info">
                            <label class="info-title">最新日期:</label>2017-06-17 21:44:01                        </p>

                        <p class="info">
                            <label class="info-title">文章标签:</label>
                                                    </p>
                    </div>
                </div>
            </div>
        </div>

            <div class="row">
                <div id="comment-wrap" class="col-md-8 col-md-offset-2 col-sm-12 phone-no-padding">
                    <div class="comment">
    <div class="comment-body">
        <div id="comments-container-vue" data-api-url="/comment/index/46">

        </div>
        <form id="comment-form" method="post" action="/index/comment/update">

            <input type="hidden" name="article_id" value="46">

                        <div class="form-group">
                <label for="comment-content">评论内容<span class="required">*</span></label>
                <textarea placeholder="支持Markdown" style="resize: vertical" id="comment-content" name="content"
                          rows="5" spellcheck="false" class="form-control markdown-content autosize-target"></textarea>
                <span class="help-block required">
                    <strong id="comment_error_msg"></strong>
                </span>
            </div>
            <div class="form-group">
                <input type="button" id="comment-submit" class="btn btn-primary"
                       value="回复"/>
            </div>
        </form>
    </div>
</div>
<script>
    var articleId = '46';

    window.onload = function () {
       // console.log(articleId)
        ajax();
    }
    function ajax() {
        var obj=new XMLHttpRequest();  // XMLHttpRequest对象用于在后台与服务器交换数据
        obj.open('GET','/comment/index/'+articleId,true);
        obj.onreadystatechange=function(){
            if (obj.readyState == 4 && obj.status == 200 || obj.status == 304) { // readyState==4说明请求已完成
                // fn.call(this, obj.responseText);  //从服务器获得数据
                 console.log(obj.responseText)

                document.getElementById('comments-container-vue').innerHTML = obj.responseText;
            }
        };
        obj.send(null);
    }

    $('#comment-submit').on('click',function () {
        var e = $("#comment-form"),
            t = e.find("#comment-submit"),
            n = e.find("#comment-content"),
            i = e.find("input[name=username]"),
            r = e.find("input[name=email]");
        if (i.length > 0) {
            if ("" == $.trim(i.val())) return i.focus(), !1;
            if ("" == $.trim(r.val())) return r.focus(), !1
        }
        if ("" == $.trim(n.val())) return n.focus(), !1;

        t.val("提交中...").addClass("disabled").prop("disabled", !0);
        $.ajax({
            method: "post",
            url: e.attr("action"),
            data: {
                commentable_type: e.find("input[name=commentable_type]").val(),
                content: n.val(),
                user_name: i.val(),
                email:  r.val(),
                article_id:articleId
            },
            success:function (data) {
                console.log(data)
                ajax();
                t.val("回复").removeClass("disabled").prop("disabled", !1)
            }
        })

    })


    function replySomeone(e) {
        var t = $("#comment-content"),
            n = t.val();
        prefix = "@" + e + " ";
        var i = "";
        i = n.length > 0 ? n + "\n" + prefix : prefix, t.focus(), t.val(i), moveEnd(t)
    }
    var moveEnd = function(e) {
        e.focus();
        var t = void 0 === e.value ? 0 : e.value.length;
        if (document.selection) {
            var n = e.createTextRange();
            n.moveStart("character", t), n.collapse(), n.select()
        } else "number" == typeof e.selectionStart && "number" == typeof e.selectionEnd && (e.selectionStart = e.selectionEnd = t)
    };

</script>

                </div>
            </div>
    </div>
{block name="script"}
<script>
    function initMarkdownTarget() {
        $(".markdown-target").each(function(e, t) {
            t.innerHTML = marked($(t).data("markdown"), {
                renderer: new marked.Renderer,
                gfm: !0,
                tables: !0,
                breaks: !1,
                pedantic: !1,
                smartLists: !0,
                smartypants: !1
            })
        })
    }
    function highLightCode() {
        $("pre code").each(function(e, t) {
            hljs.highlightBlock(t)
        })
    }
    function initTables() {
        $("table").addClass("table table-bordered table-responsive")
    }
    function autoSize() {
        autosize($(".autosize-target"))
    }
    function imageLiquid() {
        $(".js-imgLiquid").imgLiquid({
            fill: !0,
            horizontalAlign: "center",
            verticalAlign: "top"
        })
    }
    var Xblog = {
        init: function() {
            this.bootUp()
        },
        bootUp: function() {
            initMarkdownTarget(),
                initTables(), autoSize(), highLightCode(), imageLiquid()
        }
    };
    $(document).ready(function() {
        Xblog.init()
    });

</script>

{/block}


</div>
<footer class="footer" id="footer">
    <div class="copyright">
        <div class="container">
            <div class="row">
                <div class="col-sm-12">
                    <span>Copyright © <a href="{{ route('index') }}">{{ $site_title or '' }}</a></span> |
                    <span>蜀ICP备16008148号-2</span> |
                    <span>Powered by <a href="https://github.com/lufficc/Xblog">Xblog</a> </span>
                </div>
            </div>
        </div>
    </div>
</footer>
<script src="https://cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script>
    function initMarkdownTarget() {
        $(".markdown-target").each(function(e, t) {
            t.innerHTML = marked($(t).data("markdown"), {
                renderer: new marked.Renderer,
                gfm: !0,
                tables: !0,
                breaks: !1,
                pedantic: !1,
                smartLists: !0,
                smartypants: !1
            })
        })
    }
    function highLightCode() {
        $("pre code").each(function(e, t) {
            hljs.highlightBlock(t)
        })
    }
    function initTables() {
        $("table").addClass("table table-bordered table-responsive")
    }
    function autoSize() {
        autosize($(".autosize-target"))
    }
    function imageLiquid() {
        $(".js-imgLiquid").imgLiquid({
            fill: !0,
            horizontalAlign: "center",
            verticalAlign: "top"
        })
    }
    var Xblog = {
        init: function() {
            this.bootUp()
        },
        bootUp: function() {
            initMarkdownTarget(),
                initTables(), autoSize(), highLightCode(), imageLiquid()
        }
    };
    $(document).ready(function() {
        Xblog.init()
    });

</script>


</body>
</html>
